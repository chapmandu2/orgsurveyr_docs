<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualising and Analysing Organisation Data As Tidy Networks • orgsurveyr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Visualising and Analysing Organisation Data As Tidy Networks">
<meta property="og:description" content="Lightweight wrapper functions and shiny applications to facilitate the use of
    tidygraph and ggraph for the analysis and visualisation of organisation data.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">orgsurveyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introduction_to_orgsurveyr.html">Introduction To orgsurveyr</a>
    </li>
    <li>
      <a href="articles/organisations_with_ggraph.html">Simulating Organisations With tidygraph and ggraph</a>
    </li>
    <li>
      <a href="articles/package_setup.html">Setting Up The orgsurveyr Package</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ukgovdatascience/orgsurveyr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">

<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="orgsurveyr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#orgsurveyr" class="anchor"></a>orgsurveyr</h1></div>
<p>The goal of <code>orgsurveyr</code> is to facilitate the use of <a href="https://www.data-imaginist.com">Thomas Lin Pedersen’s</a> excellent <a href="https://github.com/thomasp85/tidygraph"><code>tidygraph</code></a> and <a href="https://github.com/thomasp85/ggraph"><code>ggraph</code></a> packages with organisational information used by many Human Resources departments, in particular employee surveys.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install orgsurveyr from github with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"ukgovdatascience/orgsurveyr"</span>, <span class="dt">build_vignettes =</span> <span class="ot">TRUE</span>)</code></pre></div>
</div>
<div id="example---ggraphtidygraph" class="section level2">
<h2 class="hasAnchor">
<a href="#example---ggraphtidygraph" class="anchor"></a>Example - ggraph/tidygraph</h2>
<p>An organisation is a very basic type of network known as a tree. The <a href="https://github.com/thomasp85/tidygraph"><code>tidygraph</code></a> package lets us simulate and represent a tree structure as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tg &lt;-<span class="st"> </span>tidygraph<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/tidygraph/topics/create_graphs">create_tree</a></span>(<span class="dv">13</span>,<span class="dv">3</span>) 
tg
<span class="co">#&gt; # A tbl_graph: 13 nodes and 12 edges</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # A rooted tree</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # Node Data: 13 x 0 (active)</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # Edge Data: 12 x 2</span>
<span class="co">#&gt;    from    to</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1     1     2</span>
<span class="co">#&gt; 2     1     3</span>
<span class="co">#&gt; 3     1     4</span>
<span class="co">#&gt; # ... with 9 more rows</span></code></pre></div>
<p>The <a href="https://github.com/thomasp85/ggraph"><code>ggraph</code></a> package can be used to plot networks with the familiar <a href="http://ggplot2.tidyverse.org"><code>ggplot2</code></a> syntax. Below the simulated organisation is plotted as a dendrogram:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">ggraph</span>(tg, <span class="st">'dendrogram'</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_edge_diagonal</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_node_point</span>(<span class="dt">size=</span><span class="dv">5</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="reference/figures/README-example-2-1.png" width="700"></p>
</div>
<div id="example---orgsurveyr" class="section level2">
<h2 class="hasAnchor">
<a href="#example---orgsurveyr" class="anchor"></a>Example - orgsurveyr</h2>
<p>The <code>orgsurveyr</code> package provides detailed vignettes, convenience functions and example data to help HR analysts make use of the <a href="https://github.com/thomasp85/ggraph"><code>ggraph</code></a> and <a href="https://github.com/thomasp85/tidygraph"><code>tidygraph</code></a> packages in the analysis of organisation data.</p>
<p>A realistic organisation can be simulated and plotted:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">1236</span>)
tg2 &lt;-<span class="st"> </span><span class="kw"><a href="reference/create_realistic_org.html">create_realistic_org</a></span>(<span class="dv">4</span>,<span class="dv">3</span>, <span class="dt">prob=</span><span class="fl">0.3</span>)
<span class="kw"><a href="reference/plot_org.html">plot_org</a></span>(tg2)</code></pre></div>
<p><img src="reference/figures/README-example-3-1.png" width="700"></p>
<p>Individual level data also be simulated first by simulating the number of individuals in unit:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tg3 &lt;-<span class="st"> </span><span class="kw"><a href="reference/simulate_unit_size.html">simulate_unit_size</a></span>(tg2)
tg3
<span class="co">#&gt; # A tbl_graph: 38 nodes and 37 edges</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # A rooted tree</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # Node Data: 38 x 4 (active)</span>
<span class="co">#&gt;   unit_id org_depth is_leaf unit_size</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;lgl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt; 1 1               0 FALSE           3</span>
<span class="co">#&gt; 2 3               1 FALSE           2</span>
<span class="co">#&gt; 3 4               1 FALSE           3</span>
<span class="co">#&gt; 4 5               1 FALSE           3</span>
<span class="co">#&gt; 5 10              2 FALSE           3</span>
<span class="co">#&gt; 6 11              2 FALSE           2</span>
<span class="co">#&gt; # ... with 32 more rows</span>
<span class="co">#&gt; #</span>
<span class="co">#&gt; # Edge Data: 37 x 2</span>
<span class="co">#&gt;    from    to</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1     1     2</span>
<span class="co">#&gt; 2     1     3</span>
<span class="co">#&gt; 3     1     4</span>
<span class="co">#&gt; # ... with 34 more rows</span></code></pre></div>
<p>Followed by simulating the individuals and any additional variables. The commands can be piped as per tidyverse convention:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tg3_individuals_df &lt;-<span class="st"> </span>tg3 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="reference/simulate_individuals_df.html">simulate_individuals_df</a></span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">test_var2 =</span> purrr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/purrr/topics/map">map_dbl</a></span>(individual_id, <span class="op">~</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">1</span>, <span class="dv">20</span>,<span class="dv">3</span>)))
tg3_individuals_df
<span class="co">#&gt; # A tibble: 146 x 5</span>
<span class="co">#&gt;    individual_id individual_name unit_id test_var test_var2</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;           &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 1             1_1             1           9.97      22.8</span>
<span class="co">#&gt;  2 2             1_2             1          16.0       22.0</span>
<span class="co">#&gt;  3 3             1_3             1          11.8       19.5</span>
<span class="co">#&gt;  4 4             3_1             3          13.0       26.3</span>
<span class="co">#&gt;  5 5             3_2             3           9.67      19.1</span>
<span class="co">#&gt;  6 6             4_1             4          12.5       18.5</span>
<span class="co">#&gt;  7 7             4_2             4          11.4       19.6</span>
<span class="co">#&gt;  8 8             4_3             4          12.0       16.8</span>
<span class="co">#&gt;  9 9             5_1             5          14.0       23.4</span>
<span class="co">#&gt; 10 10            5_2             5          13.2       20.4</span>
<span class="co">#&gt; # ... with 136 more rows</span></code></pre></div>
<p>The individual data is aggregated at the unit level. This can be either be just those individuals associated with an organisational unit or (more usefully) a cumulative aggregation involving all individuals that are part of that unit and any units below it in the organisation:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_df &lt;-<span class="st"> </span><span class="kw"><a href="reference/calc_summary_df.html">calc_summary_df</a></span>(<span class="dt">tg=</span>tg3, <span class="dt">df=</span>tg3_individuals_df, 
                              <span class="dt">selected_vars=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'test_var'</span>, <span class="st">'test_var2'</span>), <span class="dt">is_cumulative=</span><span class="ot">TRUE</span>)
<span class="co">#&gt; Using wide data frame format for individual variables</span>
summary_df
<span class="co">#&gt; # A tibble: 76 x 3</span>
<span class="co">#&gt;    unit_id metric_id value</span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1 1       test_var  10.2 </span>
<span class="co">#&gt;  2 1       test_var2 20.3 </span>
<span class="co">#&gt;  3 10      test_var   8.85</span>
<span class="co">#&gt;  4 10      test_var2 20.7 </span>
<span class="co">#&gt;  5 11      test_var   9.84</span>
<span class="co">#&gt;  6 11      test_var2 20.1 </span>
<span class="co">#&gt;  7 13      test_var  10.8 </span>
<span class="co">#&gt;  8 13      test_var2 20.8 </span>
<span class="co">#&gt;  9 14      test_var   9.03</span>
<span class="co">#&gt; 10 14      test_var2 19.4 </span>
<span class="co">#&gt; # ... with 66 more rows</span></code></pre></div>
<p>Finally the aggregated data can be plotted on the dendrogram:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/plot_org.html">plot_org</a></span>(tg3, <span class="dt">fill_var =</span> <span class="st">'test_var'</span>, summary_df)</code></pre></div>
<p><img src="reference/figures/README-example-7-1.png" width="700"></p>
</div>
</div>
<div id="further-readingviewing" class="section level1">
<h1 class="hasAnchor">
<a href="#further-readingviewing" class="anchor"></a>Further reading/viewing</h1>
<ul>
<li>
<a href="https://www.data-imaginist.com">Data Imaginist</a> - Thomas Lin Pedersen’s blog</li>
<li>
<a href="https://www.rstudio.com/resources/videos/tidying-up-your-network-analysis-with-tidygraph-and-ggraph/">‘Tidying up your network analysis with tidygraph and ggraph’</a>: RStudio::conf presentation from Thomas Lin Pedersen</li>
<li><a href="https://user2018.r-project.org/blog/2018/04/18/interview-with-thomas-lin-pedersen/">useR 2018 Interview with Thomas Lin Pedersen</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/ukgovdatascience/orgsurveyr">https://​github.com/​ukgovdatascience/​orgsurveyr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ukgovdatascience/orgsurveyr/issues">https://​github.com/​ukgovdatascience/​orgsurveyr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Phil Chapman <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/ukgovdatascience/orgsurveyr"><img src="https://travis-ci.org/ukgovdatascience/orgsurveyr.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/gh/ukgovdatascience/orgsurveyr"><img src="https://codecov.io/gh/ukgovdatascience/orgsurveyr/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Phil Chapman.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
